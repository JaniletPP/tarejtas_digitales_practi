<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci√≥n - Saltillo, Coahuila</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
</head>
<body>
    <div class="admin-wrapper">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <div class="logo-icon">üèîÔ∏è</div>
                    <div class="logo-text">
                        <h2>Sistema de Tarjetas</h2>
                        <p>Sierra de Arteaga</p>
                    </div>
                </div>
            </div>

            <nav class="sidebar-nav">
                <!-- Men√∫ Dashboard -->
                <div class="nav-menu-item">
                    <a href="#dashboard" class="nav-link" data-section="dashboard">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Dashboard</span>
                    </a>
                </div>

                <!-- Men√∫ desplegable: Gesti√≥n -->
                <div class="nav-menu-item dropdown">
                    <a href="#gestion" class="nav-link dropdown-toggle" data-toggle="gestion">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-text">Gesti√≥n</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </a>
                    <div class="dropdown-menu" id="dropdown-gestion">
                        <a href="#asistentes" class="dropdown-item" data-section="asistentes">
                            <span class="dropdown-icon">üë•</span>
                            Asistentes
                        </a>
                        <a href="#tarjetas" class="dropdown-item" data-section="tarjetas">
                            <span class="dropdown-icon">üí≥</span>
                            Tarjetas
                        </a>
                        <a href="#productos" class="dropdown-item" data-section="productos">
                            <span class="dropdown-icon">üõçÔ∏è</span>
                            Productos
                        </a>
                    </div>
                </div>


                <!-- Men√∫ desplegable: Reportes -->
                <div class="nav-menu-item dropdown">
                    <a href="#reportes" class="nav-link dropdown-toggle" data-toggle="reportes">
                        <span class="nav-icon">üìà</span>
                        <span class="nav-text">Reportes</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </a>
                    <div class="dropdown-menu" id="dropdown-reportes">
                        <a href="#reportes-ventas" class="dropdown-item" data-section="reportes">
                            <span class="dropdown-icon">üí∞</span>
                            Ventas
                        </a>
                        <a href="#reportes-transacciones" class="dropdown-item" data-section="reportes-transacciones">
                            <span class="dropdown-icon">üìú</span>
                            Transacciones
                        </a>
                    </div>
                </div>

                <!-- Men√∫ Perfil -->
                <div class="nav-menu-item">
                    <a href="#perfil" class="nav-link" data-section="perfil">
                        <span class="nav-icon">üë§</span>
                        <span class="nav-text">Mi Perfil</span>
                    </a>
                </div>

                <!-- Men√∫ Configuraci√≥n -->
                <div class="nav-menu-item">
                    <a href="#configuracion" class="nav-link" data-section="configuracion">
                        <span class="nav-icon">üîß</span>
                        <span class="nav-text">Configuraci√≥n</span>
                    </a>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                    <div class="user-details">
                        <strong>{{ session.usuario }}</strong>
                        <small>Administrador</small>
                    </div>
                </div>
                <a href="{{ url_for('auth.logout') }}" class="btn-logout-sidebar">
                    üö™ Salir
                </a>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="admin-content">
            <!-- Header -->
            <header class="content-header">
                <div class="header-left">
                    <h1 id="pageTitle">Dashboard General</h1>
                    <p class="header-subtitle">Sistema de Tarjetas Inteligentes - Saltillo, Coahuila</p>
                </div>
                <div class="header-right">
                    <div class="location-badge">
                        <span>üìç</span>
                        <span>Saltillo, Coahuila</span>
                    </div>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="section-dashboard" class="admin-section active">
                <div class="stats-grid">
                    <div class="stat-card stat-primary">
                        <div class="stat-icon-wrapper">
                            <div class="stat-icon">üë•</div>
                        </div>
                        <div class="stat-info">
                            <div class="stat-label">Asistentes Registrados</div>
                            <div class="stat-value" id="totalAsistentes">-</div>
                        </div>
                    </div>
                    <div class="stat-card stat-success">
                        <div class="stat-icon-wrapper">
                            <div class="stat-icon">üí≥</div>
                        </div>
                        <div class="stat-info">
                            <div class="stat-label">Tarjetas Activas</div>
                            <div class="stat-value" id="totalTarjetas">-</div>
                        </div>
                    </div>
                    <div class="stat-card stat-warning">
                        <div class="stat-icon-wrapper">
                            <div class="stat-icon">üí∞</div>
                        </div>
                        <div class="stat-info">
                            <div class="stat-label">Saldo Total en Sistema</div>
                            <div class="stat-value" id="totalSaldo">-</div>
                        </div>
                    </div>
                    <div class="stat-card stat-info">
                        <div class="stat-icon-wrapper">
                            <div class="stat-icon">üìä</div>
                        </div>
                        <div class="stat-info">
                            <div class="stat-label">Transacciones Hoy</div>
                            <div class="stat-value" id="totalTransacciones">-</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Asistentes Section -->
            <section id="section-asistentes" class="admin-section hidden">
                <div class="section-header">
                    <h2>üë• Gesti√≥n de Asistentes</h2>
                    <button class="btn btn-primary" id="btnNuevoAsistente">‚ûï Nuevo Asistente</button>
                </div>
                
                <!-- Filtros y acciones -->
                <div class="content-card">
                    <div style="display: flex; gap: 15px; align-items: flex-end; flex-wrap: wrap;">
                        <div style="flex: 1; min-width: 200px;">
                            <button class="btn btn-secondary" id="btnCargarAsistentes">üîÑ Cargar Lista</button>
                        </div>
                    </div>
                </div>
                
                <!-- Lista de asistentes -->
                <div class="content-card">
                    <div id="listaAsistentesAdmin" class="resultado"></div>
                </div>
            </section>

            <!-- Tarjetas Section -->
            <section id="section-tarjetas" class="admin-section hidden">
                <h2>üí≥ Gesti√≥n de Tarjetas</h2>
                <div class="grid">
                    <div class="content-card">
                        <h3>Asignar Tarjeta</h3>
                        <form id="formAsignarTarjetaAdmin">
                            <!-- Selector de Asistente -->
                            <div class="form-group">
                                <label>Asistente *</label>
                                <div class="asistente-selector-container">
                                    <input 
                                        type="text" 
                                        id="buscarAsistenteAdmin" 
                                        class="asistente-search-input"
                                        placeholder="Buscar por nombre, tel√©fono o email..."
                                        autocomplete="off"
                                    >
                                    <div id="asistenteDropdown" class="asistente-dropdown"></div>
                                    <input type="hidden" id="asistente_id_admin" required>
                                    <div id="asistenteSeleccionado" class="asistente-seleccionado" style="display: none;">
                                        <div class="asistente-info">
                                            <span class="asistente-nombre" id="asistenteNombreMostrar"></span>
                                            <span class="asistente-contacto" id="asistenteContactoMostrar"></span>
                                        </div>
                                        <button type="button" class="btn-clear-asistente" id="btnClearAsistente">√ó</button>
                                    </div>
                                </div>
                                <small class="form-help">Escribe para buscar asistentes sin tarjeta asignada. Se mostrar√° nombre completo y contacto.</small>
                            </div>

                            <!-- N√∫mero de Tarjeta -->
                            <div class="form-group">
                                <label>N√∫mero de Tarjeta *</label>
                                <div class="tarjeta-input-container" style="display: flex; gap: 10px; align-items: center;">
                                    <input 
                                        type="text" 
                                        id="numero_tarjeta_admin" 
                                        placeholder="TARJ-XXXXXX"
                                        required
                                        pattern="TARJ-[0-9]{6}"
                                        maxlength="11"
                                        style="flex: 1;"
                                    >
                                    <button type="button" class="btn btn-secondary" id="btnScanQRTarjeta" style="white-space: nowrap;">
                                        üì∑ Escanear QR
                                    </button>
                                </div>
                                <div id="tarjetaEstado" class="tarjeta-estado" style="display: none;"></div>
                                <small class="form-help">Ingresa el n√∫mero de tarjeta en formato TARJ-XXXXXX o escanea el c√≥digo QR.</small>
                            </div>

                            <!-- Vista Previa -->
                            <div id="vistaPreviaAsignacion" class="vista-previa-asignacion" style="display: none;">
                                <h4>üìã Vista Previa de Asignaci√≥n</h4>
                                <div class="preview-content">
                                    <div class="preview-item">
                                        <span class="preview-label">Asistente:</span>
                                        <span class="preview-value" id="previewAsistente">-</span>
                                    </div>
                                    <div class="preview-item">
                                        <span class="preview-label">Contacto:</span>
                                        <span class="preview-value" id="previewContacto">-</span>
                                    </div>
                                    <div class="preview-item">
                                        <span class="preview-label">Estado del Asistente:</span>
                                        <span class="preview-value success" id="previewEstadoAsistente">‚úÖ Sin tarjeta asignada</span>
                                    </div>
                                    <div class="preview-item">
                                        <span class="preview-label">N√∫mero de Tarjeta:</span>
                                        <span class="preview-value" id="previewTarjeta">-</span>
                                    </div>
                                    <div class="preview-item">
                                        <span class="preview-label">Estado de la Tarjeta:</span>
                                        <span class="preview-value" id="previewEstado">-</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Botones de Acci√≥n -->
                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" id="btnLimpiarFormulario">Limpiar</button>
                                <button type="submit" class="btn btn-primary" id="btnAsignarTarjeta">
                                    <span class="btn-text">Asignar Tarjeta</span>
                                    <span class="btn-loader" style="display: none;">‚è≥</span>
                                </button>
                            </div>
                        </form>
                        <div id="resultadoAsignarAdmin" class="resultado"></div>
                    </div>
                    <div class="content-card">
                        <h3>Consultar Tarjeta</h3>
                        <form id="formConsultarTarjetaAdmin">
                            <div class="form-group">
                                <label>N√∫mero de Tarjeta *</label>
                                <input type="text" id="numero_tarjeta_consulta_admin" placeholder="TARJ-XXXXXX" required>
                            </div>
                            <button type="submit" class="btn btn-info">Consultar</button>
                        </form>
                        <div id="resultadoConsultaAdmin" class="resultado"></div>
                    </div>
                </div>
            </section>

            <!-- Productos Section -->
            <section id="section-productos" class="admin-section hidden">
                <div class="section-header">
                    <h2>üõçÔ∏è Gesti√≥n de Productos</h2>
                    <button class="btn btn-primary" id="btnNuevoProductoAdmin">‚ûï Nuevo Producto</button>
                </div>

                <!-- Filtros y b√∫squeda -->
                <div class="content-card">
                    <div class="productos-filtros">
                        <div class="filtro-group">
                            <label>Filtrar por tipo:</label>
                            <select id="filtroTipoProductosAdmin" class="filtro-select-admin">
                                <option value="">Todos los tipos</option>
                            </select>
                        </div>
                        <div class="filtro-group">
                            <label>Buscar:</label>
                            <input type="text" id="buscarProductoAdmin" class="filtro-select-admin" placeholder="Buscar por nombre...">
                        </div>
                        <div class="filtro-group">
                            <label>
                                <input type="checkbox" id="mostrarNoDisponibles" checked style="margin-right: 5px;">
                                Mostrar no disponibles
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Productos organizados por tipo -->
                <div id="productosPorTipoAdmin" class="productos-por-tipo">
                    <!-- Los productos se cargan din√°micamente organizados por tipo -->
                </div>
            </section>

            <!-- Reportes Section -->
            <section id="section-reportes" class="admin-section hidden">
                <div class="section-header">
                    <h2>üìà Reportes de Ventas</h2>
                    <button class="btn btn-primary" id="btnExportarVentas" style="display: none;">üì• Exportar CSV</button>
                </div>
                
                <!-- Filtros -->
                <div class="content-card">
                    <h3>Filtros</h3>
                    <form id="formFiltrosVentas" class="filtros-reporte">
                        <div class="filtros-grid">
                            <div class="form-group">
                                <label>Fecha Inicio</label>
                                <input type="date" id="fechaInicioVentas" class="filtro-input">
                            </div>
                            <div class="form-group">
                                <label>Fecha Fin</label>
                                <input type="date" id="fechaFinVentas" class="filtro-input">
                            </div>
                            <div class="form-group">
                                <label>Punto de Venta</label>
                                <select id="puntoVentaVentas" class="filtro-input">
                                    <option value="">Todos los puntos de venta</option>
                                </select>
                            </div>
                            <div class="form-group form-actions-inline">
                                <button type="submit" class="btn btn-primary">üîç Aplicar Filtros</button>
                                <button type="button" class="btn btn-secondary" id="btnLimpiarFiltrosVentas">üîÑ Limpiar</button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Resumen -->
                <div id="resumenVentas" class="resumen-reporte" style="display: none;">
                    <div class="stats-grid">
                        <div class="stat-card stat-primary">
                            <div class="stat-icon-wrapper">
                                <div class="stat-icon">üí∞</div>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Total Ventas</div>
                                <div class="stat-value" id="totalVentas">-</div>
                            </div>
                        </div>
                        <div class="stat-card stat-success">
                            <div class="stat-icon-wrapper">
                                <div class="stat-icon">üíµ</div>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Monto Total</div>
                                <div class="stat-value" id="montoTotalVentas">-</div>
                            </div>
                        </div>
                        <div class="stat-card stat-info">
                            <div class="stat-icon-wrapper">
                                <div class="stat-icon">üìä</div>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Promedio por Venta</div>
                                <div class="stat-value" id="promedioVenta">-</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabla de Ventas -->
                <div class="content-card">
                    <div id="tablaVentasContainer" style="display: none;">
                        <div class="table-header">
                            <h3>Detalle de Ventas</h3>
                            <div class="table-actions">
                                <span id="contadorVentas" class="contador-registros"></span>
                            </div>
                        </div>
                        <div class="table-wrapper">
                            <table id="tablaVentas" class="reporte-table">
                                <thead>
                                    <tr>
                                        <th>Fecha/Hora</th>
                                        <th>Punto de Venta</th>
                                        <th>Producto</th>
                                        <th>Cantidad</th>
                                        <th>Precio Unit.</th>
                                        <th>Total</th>
                                        <th>Tarjeta</th>
                                        <th>Asistente</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyVentas">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id="sinDatosVentas" class="sin-datos">
                        <p>üëÜ Selecciona filtros y haz clic en "Aplicar Filtros" para ver el reporte</p>
                    </div>
                </div>

                <!-- Resumen por Punto de Venta y Productos M√°s Vendidos -->
                <div class="grid" id="resumenDetalladoVentas" style="display: none;">
                    <div class="content-card">
                        <h3>Ventas por Punto de Venta</h3>
                        <div class="table-wrapper">
                            <table class="reporte-table resumen-table">
                                <thead>
                                    <tr>
                                        <th>Punto de Venta</th>
                                        <th>Total Ventas</th>
                                        <th>Monto Total</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyVentasPorPV">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="content-card">
                        <h3>Productos M√°s Vendidos</h3>
                        <div class="table-wrapper">
                            <table class="reporte-table resumen-table">
                                <thead>
                                    <tr>
                                        <th>Producto</th>
                                        <th>Cantidad</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyProductosMasVendidos">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Transacciones Section -->
            <section id="section-reportes-transacciones" class="admin-section hidden">
                <div class="section-header">
                    <h2>üìú Reportes de Transacciones</h2>
                    <button class="btn btn-primary" id="btnExportarTransacciones" style="display: none;">üì• Exportar CSV</button>
                </div>
                
                <!-- Filtros -->
                <div class="content-card">
                    <h3>Filtros</h3>
                    <form id="formFiltrosTransacciones" class="filtros-reporte">
                        <div class="filtros-grid">
                            <div class="form-group">
                                <label>Fecha Inicio</label>
                                <input type="date" id="fechaInicioTransacciones" class="filtro-input">
                            </div>
                            <div class="form-group">
                                <label>Fecha Fin</label>
                                <input type="date" id="fechaFinTransacciones" class="filtro-input">
                            </div>
                            <div class="form-group">
                                <label>Tipo</label>
                                <select id="tipoTransaccion" class="filtro-input">
                                    <option value="">Todos los tipos</option>
                                    <option value="recarga">Recarga</option>
                                    <option value="pago">Pago</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Punto de Venta</label>
                                <select id="puntoVentaTransacciones" class="filtro-input">
                                    <option value="">Todos los puntos de venta</option>
                                </select>
                            </div>
                            <div class="form-group form-actions-inline">
                                <button type="submit" class="btn btn-primary">üîç Aplicar Filtros</button>
                                <button type="button" class="btn btn-secondary" id="btnLimpiarFiltrosTransacciones">üîÑ Limpiar</button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Resumen -->
                <div id="resumenTransacciones" class="resumen-reporte" style="display: none;">
                    <div class="stats-grid">
                        <div class="stat-card stat-primary">
                            <div class="stat-icon-wrapper">
                                <div class="stat-icon">üìä</div>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Total Transacciones</div>
                                <div class="stat-value" id="totalTransaccionesReporte">-</div>
                            </div>
                        </div>
                        <div class="stat-card stat-success">
                            <div class="stat-icon-wrapper">
                                <div class="stat-icon">‚ûï</div>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Total Recargas</div>
                                <div class="stat-value" id="totalRecargas">-</div>
                            </div>
                        </div>
                        <div class="stat-card stat-warning">
                            <div class="stat-icon-wrapper">
                                <div class="stat-icon">‚ûñ</div>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Total Pagos</div>
                                <div class="stat-value" id="totalPagos">-</div>
                            </div>
                        </div>
                        <div class="stat-card stat-info">
                            <div class="stat-icon-wrapper">
                                <div class="stat-icon">üí∞</div>
                            </div>
                            <div class="stat-info">
                                <div class="stat-label">Diferencia</div>
                                <div class="stat-value" id="diferenciaTransacciones">-</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabla de Transacciones -->
                <div class="content-card">
                    <div id="tablaTransaccionesContainer" style="display: none;">
                        <div class="table-header">
                            <h3>Detalle de Transacciones</h3>
                            <div class="table-actions">
                                <span id="contadorTransacciones" class="contador-registros"></span>
                            </div>
                        </div>
                        <div class="table-wrapper">
                            <table id="tablaTransacciones" class="reporte-table">
                                <thead>
                                    <tr>
                                        <th>Fecha/Hora</th>
                                        <th>Tipo</th>
                                        <th>Monto</th>
                                        <th>Tarjeta</th>
                                        <th>Asistente</th>
                                        <th>Punto de Venta</th>
                                        <th>Estado</th>
                                    </tr>
                                </thead>
                                <tbody id="tbodyTransacciones">
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div id="sinDatosTransacciones" class="sin-datos">
                        <p>üëÜ Selecciona filtros y haz clic en "Aplicar Filtros" para ver el reporte</p>
                    </div>
                </div>
            </section>

            <!-- Configuraci√≥n Section -->
            <!-- Perfil Section -->
            <section id="section-perfil" class="admin-section hidden">
                <h2>üë§ Mi Perfil</h2>
                <div class="grid">
                    <div class="content-card">
                        <h3>Informaci√≥n Personal</h3>
                        <form id="formEditarPerfil">
                            <!-- Foto de Perfil -->
                            <div class="form-group">
                                <label>Foto de Perfil</label>
                                <div class="foto-perfil-container">
                                    <div class="foto-perfil-preview" id="fotoPerfilPreview">
                                        <img id="fotoPerfilImg" src="" alt="Foto de perfil" style="display: none;">
                                        <div class="foto-perfil-placeholder" id="fotoPerfilPlaceholder">
                                            <span class="foto-icon">üë§</span>
                                            <span class="foto-text">Sin foto</span>
                                        </div>
                                    </div>
                                    <div class="foto-perfil-actions">
                                        <label for="inputFotoPerfil" class="btn btn-secondary btn-sm">
                                            üì∑ Cambiar Foto
                                        </label>
                                        <input type="file" id="inputFotoPerfil" accept="image/*" style="display: none;">
                                        <button type="button" class="btn btn-secondary btn-sm" id="btnEliminarFoto" style="display: none;">
                                            üóëÔ∏è Eliminar
                                        </button>
                                    </div>
                                </div>
                                <small class="form-help">Formatos permitidos: JPG, PNG, GIF. Tama√±o m√°ximo: 5MB</small>
                            </div>

                            <!-- Nombre Completo -->
                            <div class="form-group">
                                <label for="perfilNombreCompleto">Nombre Completo *</label>
                                <input 
                                    type="text" 
                                    id="perfilNombreCompleto" 
                                    name="nombre_completo"
                                    placeholder="Ingresa tu nombre completo"
                                    required
                                >
                            </div>

                            <!-- Email -->
                            <div class="form-group">
                                <label for="perfilEmail">Email</label>
                                <input 
                                    type="email" 
                                    id="perfilEmail" 
                                    name="email"
                                    placeholder="tu@email.com"
                                >
                            </div>

                            <!-- Tel√©fono -->
                            <div class="form-group">
                                <label for="perfilTelefono">Tel√©fono</label>
                                <input 
                                    type="tel" 
                                    id="perfilTelefono" 
                                    name="telefono"
                                    placeholder="1234567890"
                                >
                            </div>

                            <!-- Informaci√≥n de Usuario (solo lectura) -->
                            <div class="form-group">
                                <label>Usuario</label>
                                <input 
                                    type="text" 
                                    id="perfilUsuario" 
                                    value="{{ session.usuario }}"
                                    readonly
                                    class="input-readonly"
                                >
                                <small class="form-help">El nombre de usuario no se puede cambiar</small>
                            </div>

                            <!-- Rol (solo lectura) -->
                            <div class="form-group">
                                <label>Rol</label>
                                <input 
                                    type="text" 
                                    id="perfilRol" 
                                    value="Administrador"
                                    readonly
                                    class="input-readonly"
                                >
                            </div>

                            <!-- Botones de Acci√≥n -->
                            <div class="form-actions">
                                <button type="button" class="btn btn-secondary" id="btnCancelarPerfil">Cancelar</button>
                                <button type="submit" class="btn btn-primary" id="btnGuardarPerfil">
                                    <span class="btn-text">üíæ Guardar Cambios</span>
                                    <span class="btn-loader" style="display: none;">‚è≥</span>
                                </button>
                            </div>
                        </form>
                        <div id="resultadoPerfil" class="resultado"></div>
                    </div>
                </div>
            </section>

            <section id="section-configuracion" class="admin-section hidden">
                <h2>üîß Configuraci√≥n</h2>
                <div class="content-card">
                    <p>Opciones de configuraci√≥n pr√≥ximamente...</p>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal para Agregar/Editar Asistente -->
    <div id="modalAsistenteAdmin" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalAsistenteTitulo">‚ûï Registrar Nuevo Asistente</h2>
                <button class="modal-close" id="cerrarModalAsistenteAdmin">&times;</button>
            </div>
            <div class="modal-body">
                <form id="formAsistenteAdmin" novalidate>
                    <div class="form-group">
                        <label for="asistenteNombreAdmin">Nombre Completo *</label>
                        <input 
                            type="text" 
                            id="asistenteNombreAdmin" 
                            required 
                            placeholder="Ej. Juan P√©rez Garc√≠a"
                            maxlength="100"
                        >
                        <small class="form-error" id="errorNombreAsistenteAdmin"></small>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group form-col">
                            <label for="asistenteEmailAdmin">Email</label>
                            <input 
                                type="email" 
                                id="asistenteEmailAdmin" 
                                placeholder="ejemplo@correo.com"
                                maxlength="100"
                            >
                            <small class="form-help">Opcional</small>
                        </div>
                        <div class="form-group form-col">
                            <label for="asistenteTelefonoAdmin">Tel√©fono</label>
                            <input 
                                type="text" 
                                id="asistenteTelefonoAdmin" 
                                placeholder="Ej. 8441234567"
                                maxlength="20"
                            >
                            <small class="form-help">Opcional</small>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="btnCancelarAsistenteAdmin">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="btnGuardarAsistenteAdmin">
                            <span class="btn-text">Registrar Asistente</span>
                            <span class="btn-loader" style="display: none;">‚è≥</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para Agregar/Editar Producto -->
    <div id="modalProductoAdmin" class="modal">
        <div class="modal-content modal-producto">
            <div class="modal-header">
                <h2 id="modalProductoTitulo">‚ûï Agregar Nuevo Producto</h2>
                <button class="modal-close" id="cerrarModalProductoAdmin">&times;</button>
            </div>
            <div class="modal-body">
                <form id="formProductoAdmin" novalidate>
                    <input type="hidden" id="productoIdAdmin" value="">
                    
                    <!-- Nombre del Producto -->
                    <div class="form-group">
                        <label for="productoNombreAdmin">Nombre del Producto *</label>
                        <input 
                            type="text" 
                            id="productoNombreAdmin" 
                            required 
                            placeholder="Ej. Hamburguesa Cl√°sica"
                            maxlength="100"
                        >
                        <small class="form-error" id="errorNombreAdmin"></small>
                    </div>
                    
                    <!-- Categor√≠a y Punto de Venta en fila -->
                    <div class="form-row">
                        <div class="form-group form-col">
                            <label for="productoTipoAdmin">Categor√≠a *</label>
                            <select id="productoTipoAdmin" required>
                                <option value="">Seleccione una categor√≠a</option>
                                <option value="restaurante">üçΩÔ∏è Restaurante</option>
                                <option value="cafeteria">‚òï Cafeter√≠a</option>
                                <option value="souvenirs">üéÅ Souvenirs</option>
                                <option value="estacionamiento">üÖøÔ∏è Estacionamiento</option>
                                <option value="bebida">ü•§ Bebida</option>
                                <option value="comida">üçï Comida</option>
                                <option value="postre">üç∞ Postre</option>
                                <option value="snack">üçø Snack</option>
                                <option value="ropa">üëï Ropa</option>
                                <option value="otro">üì¶ Otros</option>
                            </select>
                            <small class="form-error" id="errorTipoAdmin"></small>
                        </div>
                        <div class="form-group form-col">
                            <label for="productoPuntoVentaAdmin">Punto de Venta</label>
                            <select id="productoPuntoVentaAdmin">
                                <option value="">Seleccione un punto de venta</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Precio y Estado en fila -->
                    <div class="form-row">
                        <div class="form-group form-col">
                            <label for="productoPrecioAdmin">Precio (MXN) *</label>
                            <div class="input-with-icon">
                                <span class="input-icon">$</span>
                                <input 
                                    type="number" 
                                    id="productoPrecioAdmin" 
                                    step="0.01" 
                                    min="0.01" 
                                    required 
                                    placeholder="0.00"
                                >
                            </div>
                            <small class="form-error" id="errorPrecioAdmin"></small>
                        </div>
                        <div class="form-group form-col">
                            <label>Estado</label>
                            <div class="switch-container">
                                <label class="switch">
                                    <input type="checkbox" id="productoActivoAdmin" checked>
                                    <span class="slider"></span>
                                </label>
                                <span class="switch-label" id="switchLabelAdmin">Activo</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Descripci√≥n -->
                    <div class="form-group">
                        <label for="productoDescripcionAdmin">Descripci√≥n (opcional)</label>
                        <textarea 
                            id="productoDescripcionAdmin" 
                            rows="3" 
                            placeholder="Ej. Porci√≥n individual, incluye bebida, ingredientes especiales..."
                            maxlength="500"
                        ></textarea>
                        <small class="char-count"><span id="charCountAdmin">0</span>/500 caracteres</small>
                    </div>
                    
                    <!-- Imagen del Producto -->
                    <div class="form-group">
                        <label for="productoImagenUrlAdmin">Imagen del Producto (opcional)</label>
                        <div class="imagen-upload-container">
                            <input 
                                type="url" 
                                id="productoImagenUrlAdmin" 
                                placeholder="https://ejemplo.com/imagen.jpg"
                                pattern="https?://.*"
                            >
                            <button type="button" class="btn btn-secondary btn-small" id="btnPreviewImagenAdmin">
                                Ver Preview
                            </button>
                        </div>
                        <div class="imagen-preview-container" id="productoImagenPreviewContainerAdmin">
                            <div class="imagen-preview-placeholder" id="productoImagenPreviewAdmin">
                                <span class="preview-icon">üñºÔ∏è</span>
                                <span class="preview-text">Sin imagen</span>
                            </div>
                        </div>
                        <small class="form-help">Ingresa la URL de una imagen. Se recomienda usar im√°genes 1:1 o 4:3 para evitar distorsi√≥n.</small>
                    </div>
                    
                    <!-- Opci√≥n para agregar otro -->
                    <div class="form-group checkbox-group">
                        <label class="checkbox-inline">
                            <input type="checkbox" id="productoAgregarOtroAdmin">
                            <span>Agregar otro producto despu√©s de guardar</span>
                        </label>
                    </div>
                    
                    <!-- Acciones -->
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="btnCancelarProductoAdmin">Cancelar</button>
                        <button type="submit" class="btn btn-primary" id="btnGuardarProductoAdmin">
                            <span class="btn-text">Agregar Producto</span>
                            <span class="btn-loader" style="display: none;">‚è≥</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>
    
    <!-- Modal para Escanear QR (solo para m√≥dulo de Tarjetas) -->
    <div id="modalScanQRTarjeta" class="modal" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2>üì∑ Escanear C√≥digo QR de Tarjeta</h2>
                <button class="modal-close" id="cerrarModalScanQRTarjeta">&times;</button>
            </div>
            <div class="modal-body">
                <div id="qr-reader-tarjeta" style="width: 100%; min-height: 300px; background: #000; border-radius: 4px;"></div>
                <div id="qr-reader-status-tarjeta" style="text-align: center; margin-top: 10px; color: #666;">
                    <p>‚è≥ Iniciando c√°mara...</p>
                </div>
                <div style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                    <small>üí° <strong>Consejo:</strong> Aseg√∫rate de tener buena iluminaci√≥n y mantener el c√≥digo QR dentro del marco.</small>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Scripts necesarios -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin-base.js') }}"></script>
    <script>
        // Script m√≠nimo - solo verificaci√≥n
        document.addEventListener('DOMContentLoaded', () => {
            console.log('[HTML] DOM cargado, admin-base.js deber√≠a estar inicializado');
        });
    </script>
</body>
</html>
